\title{Structural Design and Proof of\\Hierarchical Cache-Coherence Protocols}

\author{Joonwon Choi}
\prevdegrees{M.S., Massachusetts Institute of Technology (2016)\\B.S., Seoul National University (2013)}
\department{Department of Electrical Engineering and Computer Science}
\degree{Doctor of Philosophy in Electrical Engineering and Computer Science}

\degreemonth{February}
\degreeyear{2021}
\thesisdate{Jan 27, 2021}

%% By default, the thesis will be copyrighted to MIT.  If you need to copyright
%% the thesis to yourself, just specify the `vi' documentclass option.  If for
%% some reason you want to exactly specify the copyright notice text, you can
%% use the \copyrightnoticetext command.
%\copyrightnoticetext{\copyright IBM, 1990.  Do not open till Xmas.}

% If there is more than one supervisor, use the \supervisor command
% once for each.
\supervisor{Adam Chlipala}{Associate Professor of Electrical Engineering and Computer Science}

% This is the department committee chairman, not the thesis committee
% chairman.  You should replace this with your Department's Committee
% Chairman.
\chairman{Leslie A. Kolodziejski}{Professor of Electrical Engineering and Computer Science\\Chair, Department Committee on Graduate Students}

% Make the titlepage based on the above information.  If you need
% something special and can't use the standard form, you can specify
% the exact text of the titlepage yourself.  Put it in a titlepage
% environment and leave blank lines where you want vertical space.
% The spaces will be adjusted to fill the entire page.  The dotted
% lines for the signatures are made with the \signature command.
\maketitle

% The abstractpage environment sets up everything on the page except
% the text itself.  The title and other header material are put at the
% top of the page, and the supervisors are listed at the bottom.  A
% new page is begun both before and after.  Of course, an abstract may
% be more than one page itself.  If you need more control over the
% format of the page, you can use the abstract environment, which puts
% the word "Abstract" at the beginning and single spaces its text.

%% You can either \input (*not* \include) your abstract file, or you can put
%% the text of the abstract directly between the \begin{abstractpage} and
%% \end{abstractpage} commands.

% First copy: start a new page, and save the page number.
\cleardoublepage
% Uncomment the next line if you do NOT want a page number on your
% abstract and acknowledgments pages.
% \pagestyle{empty}
\setcounter{savepage}{\thepage}
\begin{abstractpage}
  Cache-coherence protocols have been one of the greatest correctness challenges of the hardware world.
  A memory subsystem usually consists of several caches and the main memory, and a cache-coherence protocol defined in such a system allows multiple memory-access transactions to execute in a distributed manner, across the levels of a cache hierarchy.
  This source of concurrency is the most challenging part in formal verification of cache coherence.

  In this dissertation, we introduce \hemiola{}, a framework embedded in Coq to design, prove, and synthesize cache-coherence protocols in a structural way.
  The framework guides the user to design protocols that never experience inconsistent interleavings while handling transactions concurrently.
  Any protocol designed in \hemiola{} always satisfies the \emph{serializability} property, allowing a user to prove the protocol assuming that \emph{transactions are executed one-at-a-time}.
  The proof relies on conditions on the protocol topology and state-change rules, but we have designed a domain-specific protocol language that guides the user to design protocols that satisfy these properties by construction.

  The framework also provides a novel way to design and prove invariants by adding predicates to messages in the system, called \emph{predicate messages}.
  On top of serializability, it is much simpler to prove a predicate message, since it is guaranteed that the predicate is not spuriously broken by other messages.

  We used \hemiola{} to design and prove hierarchical MSI and MESI protocols, in both inclusive and noninclusive variants, as case studies.
  We also demonstrated that the case-study protocols are indeed hardware-synthesizable, by using a compilation/synthesis toolchain in the framework.
\end{abstractpage}

% Additional copy: start a new page, and reset the page number.  This way,
% the second copy of the abstract is not counted as separate pages.
% Uncomment the next 6 lines if you need two copies of the abstract
% page.
% \setcounter{page}{\thesavepage}
% \begin{abstractpage}
% \input{abstract}
% \end{abstractpage}

\cleardoublepage

\section*{Acknowledgments}

%% When I was in the first year of my PhD, I happened to watch a very popular comic strip (probably only among graduate students) named ``PHD Comics''; this particular comic strip\footnote{PHD Comics: Professed? \url{http://phdcomics.com/comics.php?f=1672}} was composed only of four panels, with captions ``Impressed! Oppressed. Depressed. and Mostly Pressed,'' summarizing a life of a graduate student.
%% I wondered if my student life would be like this cartoon.

%% After 6.5 years of my PhD, now I recall this comic strip in this dissertation and think about it again.
%% Indeed it was.
%% I was impressed by brilliant faculties and students who I worked with.
%% I was oppressed by research challenges that I had to get over.
%% I was depressed by a number of rejections I got from conferences and the unknown future.
%% I have felt constant pressure that I should make good research outcomes.

%% That being said, I have never thought it was a bad decision that I joined MIT as a graduate student.
%% I am rather grateful that I could do meaningful research in a great environment.
%% I am also grateful to myself for overcoming all the oppression, depression, and pressure that I have had during the PhD period.

%% Advisors

%% Thesis committee members

%% Colleagues in the PLV and CSG groups

%% Other people

%% Family

%% I would like to thank a number of people who have contributed to this
%% work or have given me thoughtful advice. Without help from these
%% people, I would not have been able to develop the work and to write
%% the thesis.

%% First, I would like to thank my advisors, Professor Arvind and Adam
%% Chlipala for giving me a significant amount of intuitions and
%% motivations for the work. Before joining the master degree program, I
%% had almost no experience in hardware verification. Thanks to advice
%% from Arvind and Adam, I could learn a lot of knowledge and skills fast
%% and efficiently.

%% I would also like to thank the CSG and PLV group people for invaluable
%% advice. I especially give my gratitude to Muralidaran Vijayaraghavan
%% for discussing and developing the \Kami{} project with me.

%% Last but not least, I would like to thank Kwanjeong Educational
%% Foundation, which supported me financially for my master's degree.
